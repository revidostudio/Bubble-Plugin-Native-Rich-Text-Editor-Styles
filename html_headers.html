<style>
  /* ——— FROALA‑based "Rich Text Input" ——— */
  
  /* Toolbar customization */
  .bubble-element .fr-toolbar,
  .bubble-element .fr-toolbar.fr-top,
  .bubble-element .fr-box.fr-basic .fr-toolbar {
    background-color: _*_Toolbar background color (HEX)_*_ !important;
    border-top-color: _*_Toolbar background color (HEX)_*_ !important;
  }
  
  /* Placeholder text customization */
  .bubble-element .fr-placeholder {
    color: _*_Placeholder text color (HEX)_*_ !important;
    opacity: 1 !important;
    font-style: normal !important; /* turn off italics */
  }
  
  /* Main editor content customization */
  .bubble-element .fr-element {
    color: _*_Font color (HEX)_*_ !important;
    font-size: _*_Font size (number)_*_px !important;
    font-family: _*_Body font type_*_, sans-serif !important;
    font-weight: _*_Body font weight (number)_*_ !important;
    line-height: _*_Line height (number)_*_ !important;
    padding-left: _*_Horizontal padding (number)_*_px !important;
    padding-right: _*_Horizontal padding (number)_*_px !important;
    padding-top: _*_Vertical padding (number)_*_px !important;
    padding-bottom: _*_Vertical padding (number)_*_px !important;
  }
  
  /* Headers customization */
  .bubble-element .fr-element h1,
  .bubble-element .fr-element h2,
  .bubble-element .fr-element h3,
  .bubble-element .fr-element h4,
  .bubble-element .fr-element h5,
  .bubble-element .fr-element h6 {
    font-family: _*_Headers font type_*_, serif !important;
    font-weight: _*_Headings font weight (number)_*_ !important;
  }
  
  /* Link customization */
  .bubble-element .fr-element a {
    color: _*_Link color (HEX)_*_ !important;
  }
  
  /* Font size options customization */
  /* Small size */
  .bubble-element .fr-element .fr-small,
  .bubble-element .fr-view .fr-small {
    font-size: _*_Small text size (number)_*_px !important;
  }
  
  /* Normal size is already defined by the main font size above */
  
  /* Large size */
  .bubble-element .fr-element .fr-large,
  .bubble-element .fr-view .fr-large {
    font-size: _*_Large text size (number)_*_px !important;
  }
  
  /* Huge size */
  .bubble-element .fr-element .fr-huge,
  .bubble-element .fr-view .fr-huge {
    font-size: _*_Huge text size (number)_*_px !important;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Function to inject and modify Froala's font options
    function modifyFroalaFonts() {
      if (typeof FroalaEditor === 'undefined') return;
      
      // 1. Define our custom fonts
      const bodyFont = '_*_Body font type_*_';
      const headersFont = '_*_Headers font type_*_';
      
      // 2. Completely replace Froala's built-in font list with our custom fonts
      try {
        // Create a new font list to replace the default one
        const newFontList = {
          "Arial": "Arial, Helvetica, sans-serif",
          "Georgia": "Georgia, serif",
          "Times New Roman": "'Times New Roman', Times, serif",
          [bodyFont]: bodyFont + ", sans-serif",
          [headersFont]: headersFont + ", serif"
        };
        
        // Override Froala's default font list
        FroalaEditor.DEFAULTS.fontFamily = newFontList;
        
        // Set our default font as the selected one
        FroalaEditor.DEFAULTS.fontFamilyDefaultSelection = bodyFont;
        
        // Define font sizes
        FroalaEditor.DEFAULTS.fontSize = [
          '_*_Small text size (number)_*_',
          '_*_Font size (number)_*_',
          '_*_Large text size (number)_*_',
          '_*_Huge text size (number)_*_'
        ];
        
        // Set default font size
        FroalaEditor.DEFAULTS.fontSizeDefaultSelection = '_*_Font size (number)_*_';
      } catch (e) {
        console.error('Error setting Froala defaults:', e);
      }
      
      // 3. Update any existing editor instances
      if (FroalaEditor.INSTANCES && FroalaEditor.INSTANCES.length > 0) {
        for (let i = 0; i < FroalaEditor.INSTANCES.length; i++) {
          try {
            const editor = FroalaEditor.INSTANCES[i];
            if (editor && editor.opts) {
              // Update the font family options in this instance
              const newFontList = {
                "Arial": "Arial, Helvetica, sans-serif",
                "Georgia": "Georgia, serif",
                "Times New Roman": "'Times New Roman', Times, serif",
                [bodyFont]: bodyFont + ", sans-serif",
                [headersFont]: headersFont + ", serif"
              };
              
              editor.opts.fontFamily = newFontList;
              editor.opts.fontFamilyDefaultSelection = bodyFont;
              
              // Set the font sizes
              editor.opts.fontSize = [
                '_*_Small text size (number)_*_',
                '_*_Font size (number)_*_',
                '_*_Large text size (number)_*_',
                '_*_Huge text size (number)_*_'
              ];
              editor.opts.fontSizeDefaultSelection = '_*_Font size (number)_*_';
              
              // Apply the default font to the content
              if (editor.commands && editor.commands.fontFamily) {
                editor.commands.fontFamily(bodyFont);
              }
              
              // Refresh the editor UI
              if (editor.refresh) {
                editor.refresh();
              }
            }
          } catch (e) {
            console.error('Error updating Froala instance:', e);
          }
        }
      }
      
      // 4. Override the dropdown HTML directly as a fallback
      setTimeout(function() {
        const fontDropdowns = document.querySelectorAll('.fr-dropdown-list[data-name="fontFamily"]');
        fontDropdowns.forEach(dropdown => {
          // Clear existing fonts
          dropdown.innerHTML = '';
          
          // Add our custom fonts
          const fontOptions = [
            { name: 'Arial', value: 'Arial, Helvetica, sans-serif' },
            { name: 'Georgia', value: 'Georgia, serif' },
            { name: 'Times New Roman', value: "'Times New Roman', Times, serif" },
            { name: bodyFont, value: bodyFont + ', sans-serif' },
            { name: headersFont, value: headersFont + ', serif' }
          ];
          
          fontOptions.forEach(font => {
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.className = 'fr-command';
            a.setAttribute('data-cmd', 'fontFamily');
            a.setAttribute('data-param1', font.name);
            a.style.fontFamily = font.value;
            a.textContent = font.name;
            li.appendChild(a);
            dropdown.appendChild(li);
          });
        });
      }, 500);
    }
    
    // 5. Force our styles on the editor content
    function applyStylesToEditor() {
      const editors = document.querySelectorAll('.fr-element');
      editors.forEach(editor => {
        editor.style.fontFamily = '_*_Body font type_*_, sans-serif';
        editor.style.fontSize = '_*_Font size (number)_*_px';
        editor.style.color = '_*_Font color (HEX)_*_';
        editor.style.fontWeight = '_*_Body font weight (number)_*_';
        editor.style.lineHeight = '_*_Line height (number)_*_';
      });
    }
    
    // Run our functions with multiple timings to ensure they catch the editor
    setTimeout(modifyFroalaFonts, 500);
    setTimeout(modifyFroalaFonts, 1000);
    setTimeout(modifyFroalaFonts, 2000);
    
    setTimeout(applyStylesToEditor, 1000);
    setTimeout(applyStylesToEditor, 2000);
    
    // Watch for new editors being added
    const observer = new MutationObserver(function(mutations) {
      let shouldModify = false;
      
      mutations.forEach(function(mutation) {
        if (mutation.addedNodes.length) {
          for (let i = 0; i < mutation.addedNodes.length; i++) {
            const node = mutation.addedNodes[i];
            if (node.nodeType === 1) {
              if (node.classList && (
                  node.classList.contains('fr-element') || 
                  node.classList.contains('fr-box') ||
                  node.querySelector('.fr-element, .fr-box')
              )) {
                shouldModify = true;
                break;
              }
            }
          }
        }
      });
      
      if (shouldModify) {
        setTimeout(modifyFroalaFonts, 200);
        setTimeout(applyStylesToEditor, 300);
      }
    });
    
    // Start observing the document
    observer.observe(document.body, { 
      childList: true, 
      subtree: true 
    });
    
    // Apply font when editor is focused
    document.addEventListener('focusin', function(e) {
      if (e.target.classList && e.target.classList.contains('fr-element')) {
        setTimeout(function() {
          e.target.style.fontFamily = '_*_Body font type_*_, sans-serif';
          
          // Try to use Froala API
          if (typeof FroalaEditor !== 'undefined' && FroalaEditor.INSTANCES) {
            for (let i = 0; i < FroalaEditor.INSTANCES.length; i++) {
              const editor = FroalaEditor.INSTANCES[i];
              if (editor && editor.el === e.target && editor.commands && editor.commands.fontFamily) {
                editor.commands.fontFamily('_*_Body font type_*_');
              }
            }
          }
        }, 100);
      }
    });
  });
</script>